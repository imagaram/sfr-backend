openapi: 3.0.0
info:
  title: SFR.TOKYO Learning API
  description: |
    SFR.TOKYO å­¦ç¿’ç©ºé–“æ©Ÿèƒ½å°‚ç”¨APIä»•æ§˜æ›¸
    
    ## ğŸ“ å­¦ç¿’ç©ºé–“æ©Ÿèƒ½
    - **å­¦ç¿’ç©ºé–“ç®¡ç†**: å­¦ç¿’ç’°å¢ƒã®ä½œæˆãƒ»è¨­å®šãƒ»ç®¡ç†
    - **å­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„**: æ•™æã®ç®¡ç†ãƒ»é…ä¿¡ãƒ»è©•ä¾¡
    - **å­¦ç¿’é€²æ—**: å­¦ç¿’å±¥æ­´ãƒ»é€²æ—çŠ¶æ³ã®è¿½è·¡
    - **ã‚¯ã‚¤ã‚ºãƒ»ãƒ†ã‚¹ãƒˆ**: ç†è§£åº¦ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½
    - **ãƒ©ã‚¤ãƒ–ã‚»ãƒƒã‚·ãƒ§ãƒ³**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å­¦ç¿’ã‚µãƒãƒ¼ãƒˆ
    - **å­¦ç¿’åˆ†æ**: å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®åˆ†æãƒ»ãƒ¬ãƒãƒ¼ãƒˆ
    
    ## ğŸ” èªè¨¼
    - JWT Bearer Tokenèªè¨¼
    - å­¦ç¿’ç©ºé–“ã¸ã®å‚åŠ æ¨©é™ç®¡ç†
    
    ## ğŸ“Š å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰
    - **SCHOOL**: å­¦æ ¡å½¢å¼ï¼ˆè¬›å¸«ä¸»å°ã€ä½“ç³»çš„å­¦ç¿’ï¼‰
    - **SALON**: ã‚µãƒ­ãƒ³å½¢å¼ï¼ˆãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³é‡è¦–ï¼‰
    - **FANCLUB**: ãƒ•ã‚¡ãƒ³ã‚¯ãƒ©ãƒ–å½¢å¼ï¼ˆã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£äº¤æµï¼‰
    
  version: 1.0.0
  contact:
    name: SFR.TOKYO Learning Team
    email: learning@sfr.tokyo
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: https://api.sfr.tokyo/api/learning
    description: æœ¬ç•ªç’°å¢ƒ
  - url: https://dev-api.sfr.tokyo/api/learning
    description: é–‹ç™ºç’°å¢ƒ
  - url: http://localhost:8080/api/learning
    description: ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ

security:
  - bearerAuth: []

tags:
  - name: learning-spaces
    description: ğŸ“ å­¦ç¿’ç©ºé–“ç®¡ç†
  - name: learning-content
    description: ğŸ“š å­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†
  - name: learning-progress
    description: ğŸ“ˆ å­¦ç¿’é€²æ—ç®¡ç†
  - name: learning-quiz
    description: â“ ã‚¯ã‚¤ã‚ºãƒ»ãƒ†ã‚¹ãƒˆæ©Ÿèƒ½
  - name: learning-live-sessions
    description: ğŸ¥ ãƒ©ã‚¤ãƒ–ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
  - name: learning-comments
    description: ğŸ’­ å­¦ç¿’ã‚³ãƒ¡ãƒ³ãƒˆãƒ»ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³
  - name: learning-analytics
    description: ğŸ“Š å­¦ç¿’åˆ†æãƒ»ãƒ¬ãƒãƒ¼ãƒˆ
  - name: learning-materials
    description: ğŸ“ å­¦ç¿’è³‡æ–™ç®¡ç†
  - name: learning-assignments
    description: ğŸ“ èª²é¡Œãƒ»å®¿é¡Œç®¡ç†

paths:
  # ======================================
  # ğŸ“ å­¦ç¿’ç©ºé–“ç®¡ç†ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  # ======================================
  /spaces:
    get:
      tags:
        - learning-spaces
      summary: å­¦ç¿’ç©ºé–“ä¸€è¦§å–å¾—
      description: |
        èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ãªå­¦ç¿’ç©ºé–“ã®ä¸€è¦§ã‚’å–å¾—ã—ã¾ã™ã€‚
        å‚åŠ ä¸­ã®å­¦ç¿’ç©ºé–“ã¨ç®¡ç†ã—ã¦ã„ã‚‹å­¦ç¿’ç©ºé–“ã‚’å«ã¿ã¾ã™ã€‚
      operationId: getLearningSpaces
      parameters:
        - name: mode
          in: query
          description: å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
          required: false
          schema:
            $ref: '#/components/schemas/LearningMode'
        - name: status
          in: query
          description: å­¦ç¿’ç©ºé–“ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
          required: false
          schema:
            $ref: '#/components/schemas/LearningSpaceStatus'
        - name: page
          in: query
          description: ãƒšãƒ¼ã‚¸ç•ªå·ï¼ˆ0ã‹ã‚‰é–‹å§‹ï¼‰
          required: false
          schema:
            type: integer
            minimum: 0
            default: 0
        - name: size
          in: query
          description: ãƒšãƒ¼ã‚¸ã‚µã‚¤ã‚º
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
      responses:
        '200':
          description: å­¦ç¿’ç©ºé–“ä¸€è¦§å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LearningSpaceListResponse'
              example:
                content:
                  - id: 1
                    name: "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°åŸºç¤è¬›åº§"
                    description: "åˆå¿ƒè€…å‘ã‘ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å­¦ç¿’ç©ºé–“"
                    mode: "SCHOOL"
                    status: "ACTIVE"
                    memberCount: 25
                    createdAt: "2025-08-01T10:00:00Z"
                    isOwner: true
                  - id: 2
                    name: "AIæŠ€è¡“ã‚µãƒ­ãƒ³"
                    description: "AIæŠ€è¡“ã«ã¤ã„ã¦ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³ã™ã‚‹å­¦ç¿’ã‚µãƒ­ãƒ³"
                    mode: "SALON"
                    status: "ACTIVE"
                    memberCount: 12
                    createdAt: "2025-08-05T14:30:00Z"
                    isOwner: false
                totalElements: 2
                totalPages: 1
                size: 20
                number: 0
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      tags:
        - learning-spaces
      summary: å­¦ç¿’ç©ºé–“ä½œæˆ
      description: |
        æ–°ã—ã„å­¦ç¿’ç©ºé–“ã‚’ä½œæˆã—ã¾ã™ã€‚
        ä½œæˆè€…ã¯è‡ªå‹•çš„ã«å­¦ç¿’ç©ºé–“ã®ç®¡ç†è€…ã¨ãªã‚Šã¾ã™ã€‚
      operationId: createLearningSpace
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LearningSpaceCreateRequest'
            example:
              name: "Webé–‹ç™ºãƒã‚¹ã‚¿ãƒ¼ã‚¯ãƒ©ã‚¹"
              description: "HTMLã€CSSã€JavaScriptã‚’ä½¿ã£ãŸWebé–‹ç™ºã®å®Ÿè·µè¬›åº§"
              mode: "SCHOOL"
              isPublic: true
              maxMembers: 50
              settings:
                allowComments: true
                allowFileUpload: true
                moderationRequired: false
      responses:
        '201':
          description: å­¦ç¿’ç©ºé–“ä½œæˆæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LearningSpaceResponse'
              example:
                id: 3
                name: "Webé–‹ç™ºãƒã‚¹ã‚¿ãƒ¼ã‚¯ãƒ©ã‚¹"
                description: "HTMLã€CSSã€JavaScriptã‚’ä½¿ã£ãŸWebé–‹ç™ºã®å®Ÿè·µè¬›åº§"
                mode: "SCHOOL"
                status: "ACTIVE"
                isPublic: true
                maxMembers: 50
                memberCount: 1
                ownerId: "123e4567-e89b-12d3-a456-426614174000"
                createdAt: "2025-08-18T10:30:00Z"
                updatedAt: "2025-08-18T10:30:00Z"
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /spaces/{spaceId}:
    get:
      tags:
        - learning-spaces
      summary: å­¦ç¿’ç©ºé–“è©³ç´°å–å¾—
      description: |
        æŒ‡å®šã•ã‚ŒãŸå­¦ç¿’ç©ºé–“ã®è©³ç´°æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚
        å‚åŠ æ¨©é™ãŒã‚ã‚‹å ´åˆã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã§ã™ã€‚
      operationId: getLearningSpaceById
      parameters:
        - name: spaceId
          in: path
          required: true
          description: å­¦ç¿’ç©ºé–“ID
          schema:
            type: integer
            format: int64
            example: 1
      responses:
        '200':
          description: å­¦ç¿’ç©ºé–“è©³ç´°å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LearningSpaceDetailResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      tags:
        - learning-spaces
      summary: å­¦ç¿’ç©ºé–“è¨­å®šæ›´æ–°
      description: |
        å­¦ç¿’ç©ºé–“ã®è¨­å®šã‚’æ›´æ–°ã—ã¾ã™ã€‚
        ç®¡ç†è€…æ¨©é™ãŒå¿…è¦ã§ã™ã€‚
      operationId: updateLearningSpace
      parameters:
        - name: spaceId
          in: path
          required: true
          description: å­¦ç¿’ç©ºé–“ID
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LearningSpaceUpdateRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LearningSpaceResponse'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      tags:
        - learning-spaces
      summary: å­¦ç¿’ç©ºé–“å‰Šé™¤
      description: |
        å­¦ç¿’ç©ºé–“ã‚’å‰Šé™¤ã—ã¾ã™ã€‚
        ç®¡ç†è€…æ¨©é™ãŒå¿…è¦ã§ã™ã€‚å‰Šé™¤å‰ã«ãƒ¡ãƒ³ãƒãƒ¼ã¸ã®é€šçŸ¥ãŒè¡Œã‚ã‚Œã¾ã™ã€‚
      operationId: deleteLearningSpace
      parameters:
        - name: spaceId
          in: path
          required: true
          description: å­¦ç¿’ç©ºé–“ID
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: å‰Šé™¤æˆåŠŸ
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /spaces/{spaceId}/join:
    post:
      tags:
        - learning-spaces
      summary: å­¦ç¿’ç©ºé–“å‚åŠ 
      description: |
        æŒ‡å®šã•ã‚ŒãŸå­¦ç¿’ç©ºé–“ã«å‚åŠ ã—ã¾ã™ã€‚
        å…¬é–‹å­¦ç¿’ç©ºé–“ã®å ´åˆã¯å³åº§ã«å‚åŠ ã€éå…¬é–‹ã®å ´åˆã¯ç”³è«‹ã¨ãªã‚Šã¾ã™ã€‚
      operationId: joinLearningSpace
      parameters:
        - name: spaceId
          in: path
          required: true
          description: å­¦ç¿’ç©ºé–“ID
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: å‚åŠ æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JoinResponse'
        '202':
          description: å‚åŠ ç”³è«‹å—ä»˜
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JoinResponse'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '409':
          description: æ—¢ã«å‚åŠ æ¸ˆã¿
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /spaces/{spaceId}/leave:
    post:
      tags:
        - learning-spaces
      summary: å­¦ç¿’ç©ºé–“é€€å‡º
      description: |
        å­¦ç¿’ç©ºé–“ã‹ã‚‰é€€å‡ºã—ã¾ã™ã€‚
        ç®¡ç†è€…ã®å ´åˆã¯ã€ä»–ã®ç®¡ç†è€…ãŒã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ã‹ã‚‰é€€å‡ºå¯èƒ½ã§ã™ã€‚
      operationId: leaveLearningSpace
      parameters:
        - name: spaceId
          in: path
          required: true
          description: å­¦ç¿’ç©ºé–“ID
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: é€€å‡ºæˆåŠŸ
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '409':
          description: é€€å‡ºä¸å¯ï¼ˆå”¯ä¸€ã®ç®¡ç†è€…ãªã©ï¼‰
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # ======================================
  # ğŸ“š å­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  # ======================================
  /spaces/{spaceId}/content:
    get:
      tags:
        - learning-content
      summary: å­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä¸€è¦§å–å¾—
      description: |
        æŒ‡å®šã•ã‚ŒãŸå­¦ç¿’ç©ºé–“ã®å­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä¸€è¦§ã‚’å–å¾—ã—ã¾ã™ã€‚
        ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ã‚¤ãƒ—ã‚„å…¬é–‹çŠ¶æ…‹ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å¯èƒ½ã§ã™ã€‚
      operationId: getLearningContent
      parameters:
        - name: spaceId
          in: path
          required: true
          description: å­¦ç¿’ç©ºé–“ID
          schema:
            type: integer
            format: int64
        - name: contentType
          in: query
          description: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ã‚¤ãƒ—ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
          required: false
          schema:
            $ref: '#/components/schemas/ContentType'
        - name: published
          in: query
          description: å…¬é–‹çŠ¶æ…‹ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
          required: false
          schema:
            type: boolean
        - name: page
          in: query
          description: ãƒšãƒ¼ã‚¸ç•ªå·
          required: false
          schema:
            type: integer
            minimum: 0
            default: 0
        - name: size
          in: query
          description: ãƒšãƒ¼ã‚¸ã‚µã‚¤ã‚º
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 50
            default: 20
      responses:
        '200':
          description: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä¸€è¦§å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LearningContentListResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      tags:
        - learning-content
      summary: å­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä½œæˆ
      description: |
        æ–°ã—ã„å­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ä½œæˆã—ã¾ã™ã€‚
        ç®¡ç†è€…ã¾ãŸã¯è¬›å¸«æ¨©é™ãŒå¿…è¦ã§ã™ã€‚
      operationId: createLearningContent
      parameters:
        - name: spaceId
          in: path
          required: true
          description: å­¦ç¿’ç©ºé–“ID
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/LearningContentCreateRequest'
      responses:
        '201':
          description: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä½œæˆæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LearningContentResponse'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /spaces/{spaceId}/content/{contentId}:
    get:
      tags:
        - learning-content
      summary: å­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è©³ç´°å–å¾—
      description: |
        æŒ‡å®šã•ã‚ŒãŸå­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è©³ç´°æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚
        é€²æ—æƒ…å ±ã‚‚å«ã¾ã‚Œã¾ã™ã€‚
      operationId: getLearningContentById
      parameters:
        - name: spaceId
          in: path
          required: true
          description: å­¦ç¿’ç©ºé–“ID
          schema:
            type: integer
            format: int64
        - name: contentId
          in: path
          required: true
          description: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ID
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è©³ç´°å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LearningContentDetailResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      tags:
        - learning-content
      summary: å­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ›´æ–°
      description: |
        å­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®æƒ…å ±ã‚’æ›´æ–°ã—ã¾ã™ã€‚
        ç®¡ç†è€…ã¾ãŸã¯ä½œæˆè€…æ¨©é™ãŒå¿…è¦ã§ã™ã€‚
      operationId: updateLearningContent
      parameters:
        - name: spaceId
          in: path
          required: true
          description: å­¦ç¿’ç©ºé–“ID
          schema:
            type: integer
            format: int64
        - name: contentId
          in: path
          required: true
          description: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ID
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/LearningContentUpdateRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LearningContentResponse'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      tags:
        - learning-content
      summary: å­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‰Šé™¤
      description: |
        å­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å‰Šé™¤ã—ã¾ã™ã€‚
        ç®¡ç†è€…ã¾ãŸã¯ä½œæˆè€…æ¨©é™ãŒå¿…è¦ã§ã™ã€‚
      operationId: deleteLearningContent
      parameters:
        - name: spaceId
          in: path
          required: true
          description: å­¦ç¿’ç©ºé–“ID
          schema:
            type: integer
            format: int64
        - name: contentId
          in: path
          required: true
          description: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ID
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: å‰Šé™¤æˆåŠŸ
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # ======================================
  # ğŸ“ˆ å­¦ç¿’é€²æ—ç®¡ç†ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  # ======================================
  /spaces/{spaceId}/progress:
    get:
      tags:
        - learning-progress
      summary: å­¦ç¿’é€²æ—çŠ¶æ³å–å¾—
      description: |
        æŒ‡å®šã•ã‚ŒãŸå­¦ç¿’ç©ºé–“ã§ã®è‡ªåˆ†ã®å­¦ç¿’é€²æ—çŠ¶æ³ã‚’å–å¾—ã—ã¾ã™ã€‚
        å®Œäº†ã—ãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚„è©•ä¾¡ãªã©ã®æƒ…å ±ãŒå«ã¾ã‚Œã¾ã™ã€‚
      operationId: getLearningProgress
      parameters:
        - name: spaceId
          in: path
          required: true
          description: å­¦ç¿’ç©ºé–“ID
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: é€²æ—çŠ¶æ³å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LearningProgressResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /spaces/{spaceId}/content/{contentId}/progress:
    post:
      tags:
        - learning-progress
      summary: å­¦ç¿’é€²æ—è¨˜éŒ²
      description: |
        æŒ‡å®šã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å­¦ç¿’é€²æ—ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚
        å®Œäº†çŠ¶æ³ã‚„å­¦ç¿’æ™‚é–“ã€è©•ä¾¡ãªã©ã‚’è¨˜éŒ²ã§ãã¾ã™ã€‚
      operationId: recordLearningProgress
      parameters:
        - name: spaceId
          in: path
          required: true
          description: å­¦ç¿’ç©ºé–“ID
          schema:
            type: integer
            format: int64
        - name: contentId
          in: path
          required: true
          description: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ID
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProgressRecordRequest'
      responses:
        '200':
          description: é€²æ—è¨˜éŒ²æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProgressRecordResponse'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # ======================================
  # â“ ã‚¯ã‚¤ã‚ºãƒ»ãƒ†ã‚¹ãƒˆæ©Ÿèƒ½ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  # ======================================
  /spaces/{spaceId}/quizzes:
    get:
      tags:
        - learning-quiz
      summary: ã‚¯ã‚¤ã‚ºä¸€è¦§å–å¾—
      description: |
        æŒ‡å®šã•ã‚ŒãŸå­¦ç¿’ç©ºé–“ã®ã‚¯ã‚¤ã‚ºä¸€è¦§ã‚’å–å¾—ã—ã¾ã™ã€‚
        è‡ªåˆ†ã®å›ç­”çŠ¶æ³ã‚‚å«ã¾ã‚Œã¾ã™ã€‚
      operationId: getQuizzes
      parameters:
        - name: spaceId
          in: path
          required: true
          description: å­¦ç¿’ç©ºé–“ID
          schema:
            type: integer
            format: int64
        - name: difficulty
          in: query
          description: é›£æ˜“åº¦ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
          required: false
          schema:
            $ref: '#/components/schemas/QuizDifficulty'
        - name: status
          in: query
          description: å›ç­”çŠ¶æ³ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
          required: false
          schema:
            $ref: '#/components/schemas/QuizStatus'
      responses:
        '200':
          description: ã‚¯ã‚¤ã‚ºä¸€è¦§å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuizListResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      tags:
        - learning-quiz
      summary: ã‚¯ã‚¤ã‚ºä½œæˆ
      description: |
        æ–°ã—ã„ã‚¯ã‚¤ã‚ºã‚’ä½œæˆã—ã¾ã™ã€‚
        ç®¡ç†è€…ã¾ãŸã¯è¬›å¸«æ¨©é™ãŒå¿…è¦ã§ã™ã€‚
      operationId: createQuiz
      parameters:
        - name: spaceId
          in: path
          required: true
          description: å­¦ç¿’ç©ºé–“ID
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QuizCreateRequest'
      responses:
        '201':
          description: ã‚¯ã‚¤ã‚ºä½œæˆæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuizResponse'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /spaces/{spaceId}/quizzes/{quizId}/attempt:
    post:
      tags:
        - learning-quiz
      summary: ã‚¯ã‚¤ã‚ºå›ç­”æå‡º
      description: |
        ã‚¯ã‚¤ã‚ºã®å›ç­”ã‚’æå‡ºã—ã¾ã™ã€‚
        å›ç­”å¾Œã¯çµæœã¨è§£èª¬ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
      operationId: submitQuizAnswer
      parameters:
        - name: spaceId
          in: path
          required: true
          description: å­¦ç¿’ç©ºé–“ID
          schema:
            type: integer
            format: int64
        - name: quizId
          in: path
          required: true
          description: ã‚¯ã‚¤ã‚ºID
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QuizAnswerRequest'
      responses:
        '200':
          description: å›ç­”æå‡ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuizResultResponse'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '409':
          description: æ—¢ã«å›ç­”æ¸ˆã¿
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |
        JWT Bearer Tokenèªè¨¼
        
        **å–å¾—æ–¹æ³•:**
        1. ãƒ¡ã‚¤ãƒ³èªè¨¼API `/api/v1/auth/authenticate` ã§ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—
        2. `Authorization: Bearer <token>` ãƒ˜ãƒƒãƒ€ãƒ¼ã«è¨­å®š
        
        **æœ‰åŠ¹æœŸé™:** 24æ™‚é–“

  schemas:
    # ======================================
    # ğŸ“ å­¦ç¿’ç©ºé–“é–¢é€£ã‚¹ã‚­ãƒ¼ãƒ
    # ======================================
    LearningSpaceCreateRequest:
      type: object
      required:
        - name
        - mode
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
          description: å­¦ç¿’ç©ºé–“å
          example: "Webé–‹ç™ºãƒã‚¹ã‚¿ãƒ¼ã‚¯ãƒ©ã‚¹"
        description:
          type: string
          maxLength: 1000
          description: å­¦ç¿’ç©ºé–“ã®èª¬æ˜
          example: "HTMLã€CSSã€JavaScriptã‚’ä½¿ã£ãŸWebé–‹ç™ºã®å®Ÿè·µè¬›åº§"
        mode:
          $ref: '#/components/schemas/LearningMode'
        isPublic:
          type: boolean
          description: å…¬é–‹å­¦ç¿’ç©ºé–“ã‹ã©ã†ã‹
          default: true
          example: true
        maxMembers:
          type: integer
          minimum: 1
          maximum: 1000
          description: æœ€å¤§å‚åŠ è€…æ•°
          example: 50
        settings:
          $ref: '#/components/schemas/LearningSpaceSettings'

    LearningSpaceUpdateRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
          description: å­¦ç¿’ç©ºé–“å
        description:
          type: string
          maxLength: 1000
          description: å­¦ç¿’ç©ºé–“ã®èª¬æ˜
        isPublic:
          type: boolean
          description: å…¬é–‹å­¦ç¿’ç©ºé–“ã‹ã©ã†ã‹
        maxMembers:
          type: integer
          minimum: 1
          maximum: 1000
          description: æœ€å¤§å‚åŠ è€…æ•°
        settings:
          $ref: '#/components/schemas/LearningSpaceSettings'

    LearningSpaceResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: å­¦ç¿’ç©ºé–“ID
          example: 1
        name:
          type: string
          description: å­¦ç¿’ç©ºé–“å
          example: "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°åŸºç¤è¬›åº§"
        description:
          type: string
          description: å­¦ç¿’ç©ºé–“ã®èª¬æ˜
          example: "åˆå¿ƒè€…å‘ã‘ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å­¦ç¿’ç©ºé–“"
        mode:
          $ref: '#/components/schemas/LearningMode'
        status:
          $ref: '#/components/schemas/LearningSpaceStatus'
        isPublic:
          type: boolean
          description: å…¬é–‹å­¦ç¿’ç©ºé–“ã‹ã©ã†ã‹
          example: true
        maxMembers:
          type: integer
          description: æœ€å¤§å‚åŠ è€…æ•°
          example: 50
        memberCount:
          type: integer
          description: ç¾åœ¨ã®å‚åŠ è€…æ•°
          example: 25
        ownerId:
          type: string
          format: uuid
          description: ä½œæˆè€…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
          example: "123e4567-e89b-12d3-a456-426614174000"
        createdAt:
          type: string
          format: date-time
          description: ä½œæˆæ—¥æ™‚
          example: "2025-08-01T10:00:00Z"
        updatedAt:
          type: string
          format: date-time
          description: æ›´æ–°æ—¥æ™‚
          example: "2025-08-18T10:30:00Z"

    LearningSpaceDetailResponse:
      allOf:
        - $ref: '#/components/schemas/LearningSpaceResponse'
        - type: object
          properties:
            settings:
              $ref: '#/components/schemas/LearningSpaceSettings'
            members:
              type: array
              items:
                $ref: '#/components/schemas/LearningSpaceMember'
              description: å‚åŠ è€…ä¸€è¦§
            contentCount:
              type: integer
              description: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ•°
              example: 15
            quizCount:
              type: integer
              description: ã‚¯ã‚¤ã‚ºæ•°
              example: 8
            userRole:
              $ref: '#/components/schemas/LearningSpaceRole'

    LearningSpaceListResponse:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/LearningSpaceResponse'
        totalElements:
          type: integer
          description: ç·ä»¶æ•°
          example: 25
        totalPages:
          type: integer
          description: ç·ãƒšãƒ¼ã‚¸æ•°
          example: 3
        size:
          type: integer
          description: ãƒšãƒ¼ã‚¸ã‚µã‚¤ã‚º
          example: 20
        number:
          type: integer
          description: ç¾åœ¨ã®ãƒšãƒ¼ã‚¸ç•ªå·ï¼ˆ0ã‹ã‚‰é–‹å§‹ï¼‰
          example: 0

    LearningSpaceSettings:
      type: object
      properties:
        allowComments:
          type: boolean
          description: ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½ã‚’è¨±å¯ã™ã‚‹ã‹
          default: true
          example: true
        allowFileUpload:
          type: boolean
          description: ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚’è¨±å¯ã™ã‚‹ã‹
          default: true
          example: true
        moderationRequired:
          type: boolean
          description: ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæ‰¿èªï¼‰ãŒå¿…è¦ã‹
          default: false
          example: false
        autoProgressTracking:
          type: boolean
          description: è‡ªå‹•é€²æ—è¿½è·¡ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã‹
          default: true
          example: true
        notificationSettings:
          $ref: '#/components/schemas/NotificationSettings'

    NotificationSettings:
      type: object
      properties:
        newContentNotification:
          type: boolean
          description: æ–°ã—ã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®é€šçŸ¥
          default: true
        assignmentDueNotification:
          type: boolean
          description: èª²é¡ŒæœŸé™ã®é€šçŸ¥
          default: true
        discussionNotification:
          type: boolean
          description: ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³ã®é€šçŸ¥
          default: false

    LearningSpaceMember:
      type: object
      properties:
        userId:
          type: string
          format: uuid
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
          example: "123e4567-e89b-12d3-a456-426614174000"
        username:
          type: string
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼å
          example: "ç”°ä¸­å¤ªéƒ"
        role:
          $ref: '#/components/schemas/LearningSpaceRole'
        joinedAt:
          type: string
          format: date-time
          description: å‚åŠ æ—¥æ™‚
          example: "2025-08-05T14:30:00Z"
        lastActiveAt:
          type: string
          format: date-time
          description: æœ€çµ‚æ´»å‹•æ—¥æ™‚
          example: "2025-08-17T16:45:00Z"
        progressPercentage:
          type: integer
          minimum: 0
          maximum: 100
          description: é€²æ—ç‡ï¼ˆ%ï¼‰
          example: 75

    JoinResponse:
      type: object
      properties:
        status:
          type: string
          enum:
            - JOINED
            - PENDING_APPROVAL
          description: å‚åŠ çŠ¶æ³
          example: "JOINED"
        message:
          type: string
          description: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
          example: "å­¦ç¿’ç©ºé–“ã«å‚åŠ ã—ã¾ã—ãŸ"
        spaceId:
          type: integer
          format: int64
          description: å­¦ç¿’ç©ºé–“ID
          example: 1

    # ======================================
    # ğŸ“š å­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é–¢é€£ã‚¹ã‚­ãƒ¼ãƒ
    # ======================================
    LearningContentCreateRequest:
      type: object
      required:
        - title
        - contentType
      properties:
        title:
          type: string
          minLength: 1
          maxLength: 200
          description: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ã‚¤ãƒˆãƒ«
        description:
          type: string
          maxLength: 2000
          description: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„èª¬æ˜
        contentType:
          $ref: '#/components/schemas/ContentType'
        content:
          type: string
          description: ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼ˆcontentTypeãŒTEXTã®å ´åˆï¼‰
        file:
          type: string
          format: binary
          description: ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆVIDEOã€AUDIOã€DOCUMENTã®å ´åˆï¼‰
        duration:
          type: integer
          minimum: 0
          description: å­¦ç¿’äºˆæƒ³æ™‚é–“ï¼ˆåˆ†ï¼‰
        difficulty:
          $ref: '#/components/schemas/ContentDifficulty'
        tags:
          type: array
          items:
            type: string
          description: ã‚¿ã‚°
        isPublished:
          type: boolean
          description: å…¬é–‹ã™ã‚‹ã‹
          default: false
        order:
          type: integer
          minimum: 0
          description: è¡¨ç¤ºé †åº

    LearningContentUpdateRequest:
      type: object
      properties:
        title:
          type: string
          minLength: 1
          maxLength: 200
          description: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ã‚¤ãƒˆãƒ«
        description:
          type: string
          maxLength: 2000
          description: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„èª¬æ˜
        content:
          type: string
          description: ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„
        file:
          type: string
          format: binary
          description: ãƒ•ã‚¡ã‚¤ãƒ«
        duration:
          type: integer
          minimum: 0
          description: å­¦ç¿’äºˆæƒ³æ™‚é–“ï¼ˆåˆ†ï¼‰
        difficulty:
          $ref: '#/components/schemas/ContentDifficulty'
        tags:
          type: array
          items:
            type: string
          description: ã‚¿ã‚°
        isPublished:
          type: boolean
          description: å…¬é–‹ã™ã‚‹ã‹
        order:
          type: integer
          minimum: 0
          description: è¡¨ç¤ºé †åº

    LearningContentResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ID
          example: 1
        title:
          type: string
          description: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ã‚¤ãƒˆãƒ«
          example: "HTMLåŸºç¤ï¼šã‚¿ã‚°ã®ä½¿ã„æ–¹"
        description:
          type: string
          description: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„èª¬æ˜
          example: "HTMLã®åŸºæœ¬çš„ãªã‚¿ã‚°ã®ä½¿ã„æ–¹ã‚’å­¦ç¿’ã—ã¾ã™"
        contentType:
          $ref: '#/components/schemas/ContentType'
        contentUrl:
          type: string
          format: uri
          description: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ•ã‚¡ã‚¤ãƒ«ã®URL
          example: "https://api.sfr.tokyo/content/video_001.mp4"
        duration:
          type: integer
          description: å­¦ç¿’äºˆæƒ³æ™‚é–“ï¼ˆåˆ†ï¼‰
          example: 30
        difficulty:
          $ref: '#/components/schemas/ContentDifficulty'
        tags:
          type: array
          items:
            type: string
          description: ã‚¿ã‚°
          example: ["HTML", "åŸºç¤", "ã‚¿ã‚°"]
        isPublished:
          type: boolean
          description: å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‹
          example: true
        order:
          type: integer
          description: è¡¨ç¤ºé †åº
          example: 1
        authorId:
          type: string
          format: uuid
          description: ä½œæˆè€…ID
          example: "123e4567-e89b-12d3-a456-426614174000"
        createdAt:
          type: string
          format: date-time
          description: ä½œæˆæ—¥æ™‚
          example: "2025-08-10T09:00:00Z"
        updatedAt:
          type: string
          format: date-time
          description: æ›´æ–°æ—¥æ™‚
          example: "2025-08-15T14:30:00Z"

    LearningContentDetailResponse:
      allOf:
        - $ref: '#/components/schemas/LearningContentResponse'
        - type: object
          properties:
            content:
              type: string
              description: ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„
            userProgress:
              $ref: '#/components/schemas/ContentProgress'
            ratings:
              $ref: '#/components/schemas/ContentRatings'
            prerequisites:
              type: array
              items:
                type: integer
                format: int64
              description: å‰æã¨ãªã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ID
            relatedContent:
              type: array
              items:
                $ref: '#/components/schemas/LearningContentResponse'
              description: é–¢é€£ã‚³ãƒ³ãƒ†ãƒ³ãƒ„

    LearningContentListResponse:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/LearningContentResponse'
        totalElements:
          type: integer
          description: ç·ä»¶æ•°
        totalPages:
          type: integer
          description: ç·ãƒšãƒ¼ã‚¸æ•°
        size:
          type: integer
          description: ãƒšãƒ¼ã‚¸ã‚µã‚¤ã‚º
        number:
          type: integer
          description: ç¾åœ¨ã®ãƒšãƒ¼ã‚¸ç•ªå·

    ContentProgress:
      type: object
      properties:
        isCompleted:
          type: boolean
          description: å®Œäº†ã—ãŸã‹
          example: true
        completedAt:
          type: string
          format: date-time
          description: å®Œäº†æ—¥æ™‚
          example: "2025-08-16T11:30:00Z"
        timeSpent:
          type: integer
          description: å­¦ç¿’æ™‚é–“ï¼ˆåˆ†ï¼‰
          example: 45
        lastAccessedAt:
          type: string
          format: date-time
          description: æœ€çµ‚ã‚¢ã‚¯ã‚»ã‚¹æ—¥æ™‚
          example: "2025-08-17T09:15:00Z"
        rating:
          type: integer
          minimum: 1
          maximum: 5
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼è©•ä¾¡ï¼ˆ1-5ï¼‰
          example: 4

    ContentRatings:
      type: object
      properties:
        averageRating:
          type: number
          format: float
          minimum: 0
          maximum: 5
          description: å¹³å‡è©•ä¾¡
          example: 4.2
        totalRatings:
          type: integer
          description: è©•ä¾¡æ•°
          example: 28
        ratingDistribution:
          type: object
          properties:
            "1":
              type: integer
              example: 1
            "2":
              type: integer
              example: 2
            "3":
              type: integer
              example: 5
            "4":
              type: integer
              example: 12
            "5":
              type: integer
              example: 8
          description: è©•ä¾¡åˆ†å¸ƒ

    # ======================================
    # ğŸ“ˆ å­¦ç¿’é€²æ—é–¢é€£ã‚¹ã‚­ãƒ¼ãƒ
    # ======================================
    LearningProgressResponse:
      type: object
      properties:
        spaceId:
          type: integer
          format: int64
          description: å­¦ç¿’ç©ºé–“ID
          example: 1
        userId:
          type: string
          format: uuid
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
          example: "123e4567-e89b-12d3-a456-426614174000"
        overallProgress:
          type: integer
          minimum: 0
          maximum: 100
          description: å…¨ä½“é€²æ—ç‡ï¼ˆ%ï¼‰
          example: 75
        completedContentCount:
          type: integer
          description: å®Œäº†ã—ãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ•°
          example: 12
        totalContentCount:
          type: integer
          description: ç·ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ•°
          example: 16
        totalTimeSpent:
          type: integer
          description: ç·å­¦ç¿’æ™‚é–“ï¼ˆåˆ†ï¼‰
          example: 720
        lastActivity:
          type: string
          format: date-time
          description: æœ€çµ‚å­¦ç¿’æ—¥æ™‚
          example: "2025-08-17T16:45:00Z"
        contentProgress:
          type: array
          items:
            type: object
            properties:
              contentId:
                type: integer
                format: int64
              contentTitle:
                type: string
              progress:
                $ref: '#/components/schemas/ContentProgress'
        achievements:
          type: array
          items:
            $ref: '#/components/schemas/Achievement'
          description: é”æˆã—ãŸæˆæœ

    ProgressRecordRequest:
      type: object
      required:
        - progressType
      properties:
        progressType:
          type: string
          enum:
            - STARTED
            - IN_PROGRESS
            - COMPLETED
          description: é€²æ—ã‚¿ã‚¤ãƒ—
          example: "COMPLETED"
        timeSpent:
          type: integer
          minimum: 0
          description: å­¦ç¿’æ™‚é–“ï¼ˆåˆ†ï¼‰
          example: 30
        rating:
          type: integer
          minimum: 1
          maximum: 5
          description: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è©•ä¾¡ï¼ˆ1-5ï¼‰
          example: 4
        notes:
          type: string
          maxLength: 1000
          description: å­¦ç¿’ãƒ¡ãƒ¢
          example: "HTMLã‚¿ã‚°ã®åŸºæœ¬çš„ãªä½¿ã„æ–¹ãŒã‚ˆãç†è§£ã§ãã¾ã—ãŸ"

    ProgressRecordResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: é€²æ—è¨˜éŒ²ID
          example: 1
        contentId:
          type: integer
          format: int64
          description: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ID
          example: 1
        progressType:
          type: string
          description: é€²æ—ã‚¿ã‚¤ãƒ—
          example: "COMPLETED"
        timeSpent:
          type: integer
          description: å­¦ç¿’æ™‚é–“ï¼ˆåˆ†ï¼‰
          example: 30
        rating:
          type: integer
          description: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è©•ä¾¡
          example: 4
        recordedAt:
          type: string
          format: date-time
          description: è¨˜éŒ²æ—¥æ™‚
          example: "2025-08-17T16:45:00Z"
        newAchievements:
          type: array
          items:
            $ref: '#/components/schemas/Achievement'
          description: æ–°ã—ãç²å¾—ã—ãŸæˆæœ

    Achievement:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: æˆæœID
          example: 1
        title:
          type: string
          description: æˆæœã‚¿ã‚¤ãƒˆãƒ«
          example: "HTMLåŸºç¤ãƒã‚¹ã‚¿ãƒ¼"
        description:
          type: string
          description: æˆæœèª¬æ˜
          example: "HTMLåŸºç¤ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ã™ã¹ã¦å®Œäº†ã—ã¾ã—ãŸ"
        badgeUrl:
          type: string
          format: uri
          description: ãƒãƒƒã‚¸ç”»åƒURL
          example: "https://api.sfr.tokyo/badges/html_master.png"
        earnedAt:
          type: string
          format: date-time
          description: ç²å¾—æ—¥æ™‚
          example: "2025-08-17T16:45:00Z"

    # ======================================
    # â“ ã‚¯ã‚¤ã‚ºé–¢é€£ã‚¹ã‚­ãƒ¼ãƒ
    # ======================================
    QuizCreateRequest:
      type: object
      required:
        - title
        - questions
      properties:
        title:
          type: string
          minLength: 1
          maxLength: 200
          description: ã‚¯ã‚¤ã‚ºã‚¿ã‚¤ãƒˆãƒ«
          example: "HTMLåŸºç¤ç¢ºèªãƒ†ã‚¹ãƒˆ"
        description:
          type: string
          maxLength: 1000
          description: ã‚¯ã‚¤ã‚ºèª¬æ˜
          example: "HTMLåŸºç¤ã®ç†è§£åº¦ã‚’ç¢ºèªã™ã‚‹ã‚¯ã‚¤ã‚ºã§ã™"
        difficulty:
          $ref: '#/components/schemas/QuizDifficulty'
        timeLimit:
          type: integer
          minimum: 0
          description: åˆ¶é™æ™‚é–“ï¼ˆåˆ†ã€0ã¯ç„¡åˆ¶é™ï¼‰
          example: 30
        passingScore:
          type: integer
          minimum: 0
          maximum: 100
          description: åˆæ ¼ç‚¹ï¼ˆ%ï¼‰
          example: 70
        questions:
          type: array
          items:
            $ref: '#/components/schemas/QuizQuestion'
          minItems: 1
          description: å•é¡Œãƒªã‚¹ãƒˆ

    QuizResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: ã‚¯ã‚¤ã‚ºID
          example: 1
        title:
          type: string
          description: ã‚¯ã‚¤ã‚ºã‚¿ã‚¤ãƒˆãƒ«
          example: "HTMLåŸºç¤ç¢ºèªãƒ†ã‚¹ãƒˆ"
        description:
          type: string
          description: ã‚¯ã‚¤ã‚ºèª¬æ˜
          example: "HTMLåŸºç¤ã®ç†è§£åº¦ã‚’ç¢ºèªã™ã‚‹ã‚¯ã‚¤ã‚ºã§ã™"
        difficulty:
          $ref: '#/components/schemas/QuizDifficulty'
        timeLimit:
          type: integer
          description: åˆ¶é™æ™‚é–“ï¼ˆåˆ†ï¼‰
          example: 30
        passingScore:
          type: integer
          description: åˆæ ¼ç‚¹ï¼ˆ%ï¼‰
          example: 70
        questionCount:
          type: integer
          description: å•é¡Œæ•°
          example: 10
        authorId:
          type: string
          format: uuid
          description: ä½œæˆè€…ID
          example: "123e4567-e89b-12d3-a456-426614174000"
        createdAt:
          type: string
          format: date-time
          description: ä½œæˆæ—¥æ™‚
          example: "2025-08-10T09:00:00Z"
        userAttempts:
          type: integer
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å—é¨“å›æ•°
          example: 2
        bestScore:
          type: integer
          minimum: 0
          maximum: 100
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€é«˜å¾—ç‚¹
          example: 85

    QuizListResponse:
      type: object
      properties:
        quizzes:
          type: array
          items:
            $ref: '#/components/schemas/QuizResponse'
        totalCount:
          type: integer
          description: ç·ã‚¯ã‚¤ã‚ºæ•°
          example: 5

    QuizQuestion:
      type: object
      required:
        - question
        - questionType
        - options
        - correctAnswer
      properties:
        question:
          type: string
          minLength: 1
          maxLength: 1000
          description: å•é¡Œæ–‡
          example: "HTMLã§ãƒªãƒ³ã‚¯ã‚’ä½œæˆã™ã‚‹ã‚¿ã‚°ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ"
        questionType:
          type: string
          enum:
            - SINGLE_CHOICE
            - MULTIPLE_CHOICE
            - TRUE_FALSE
            - TEXT_INPUT
          description: å•é¡Œã‚¿ã‚¤ãƒ—
          example: "SINGLE_CHOICE"
        options:
          type: array
          items:
            type: string
          description: é¸æŠè‚¢ï¼ˆé¸æŠå•é¡Œã®å ´åˆï¼‰
          example: ["<link>", "<a>", "<href>", "<url>"]
        correctAnswer:
          type: string
          description: æ­£è§£ï¼ˆç®¡ç†è€…ã®ã¿å‚ç…§ï¼‰
          example: "<a>"
        explanation:
          type: string
          maxLength: 1000
          description: è§£èª¬
          example: "<a>ã‚¿ã‚°ã¯ã‚¢ãƒ³ã‚«ãƒ¼è¦ç´ ã§ãƒªãƒ³ã‚¯ã‚’ä½œæˆã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã—ã¾ã™"
        points:
          type: integer
          minimum: 1
          description: é…ç‚¹
          default: 1
          example: 1

    QuizAnswerRequest:
      type: object
      required:
        - answers
      properties:
        answers:
          type: array
          items:
            type: object
            properties:
              questionIndex:
                type: integer
                minimum: 0
                description: å•é¡Œç•ªå·ï¼ˆ0ã‹ã‚‰é–‹å§‹ï¼‰
              answer:
                type: string
                description: å›ç­”
          description: å›ç­”ãƒªã‚¹ãƒˆ
          example:
            - questionIndex: 0
              answer: "<a>"
            - questionIndex: 1
              answer: "true"

    QuizResultResponse:
      type: object
      properties:
        quizId:
          type: integer
          format: int64
          description: ã‚¯ã‚¤ã‚ºID
          example: 1
        score:
          type: integer
          minimum: 0
          maximum: 100
          description: å¾—ç‚¹ï¼ˆ%ï¼‰
          example: 85
        totalQuestions:
          type: integer
          description: ç·å•é¡Œæ•°
          example: 10
        correctAnswers:
          type: integer
          description: æ­£è§£æ•°
          example: 8
        passed:
          type: boolean
          description: åˆæ ¼ã—ãŸã‹
          example: true
        timeSpent:
          type: integer
          description: å›ç­”æ™‚é–“ï¼ˆåˆ†ï¼‰
          example: 25
        submittedAt:
          type: string
          format: date-time
          description: æå‡ºæ—¥æ™‚
          example: "2025-08-17T16:45:00Z"
        questionResults:
          type: array
          items:
            type: object
            properties:
              questionIndex:
                type: integer
              isCorrect:
                type: boolean
              userAnswer:
                type: string
              correctAnswer:
                type: string
              explanation:
                type: string
          description: å•é¡Œåˆ¥çµæœ

    # ======================================
    # ğŸ“Š åˆ—æŒ™å‹ã‚¹ã‚­ãƒ¼ãƒ
    # ======================================
    LearningMode:
      type: string
      enum:
        - SCHOOL
        - SALON
        - FANCLUB
      description: |
        å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰
        - `SCHOOL`: å­¦æ ¡å½¢å¼ï¼ˆè¬›å¸«ä¸»å°ã€ä½“ç³»çš„å­¦ç¿’ï¼‰
        - `SALON`: ã‚µãƒ­ãƒ³å½¢å¼ï¼ˆãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³é‡è¦–ï¼‰
        - `FANCLUB`: ãƒ•ã‚¡ãƒ³ã‚¯ãƒ©ãƒ–å½¢å¼ï¼ˆã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£äº¤æµï¼‰

    LearningSpaceStatus:
      type: string
      enum:
        - ACTIVE
        - PAUSED
        - COMPLETED
        - ARCHIVED
      description: |
        å­¦ç¿’ç©ºé–“ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
        - `ACTIVE`: ã‚¢ã‚¯ãƒ†ã‚£ãƒ–
        - `PAUSED`: ä¸€æ™‚åœæ­¢
        - `COMPLETED`: å®Œäº†
        - `ARCHIVED`: ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–

    LearningSpaceRole:
      type: string
      enum:
        - OWNER
        - INSTRUCTOR
        - MEMBER
        - GUEST
      description: |
        å­¦ç¿’ç©ºé–“ã§ã®å½¹å‰²
        - `OWNER`: æ‰€æœ‰è€…
        - `INSTRUCTOR`: è¬›å¸«
        - `MEMBER`: å‚åŠ è€…
        - `GUEST`: ã‚²ã‚¹ãƒˆ

    ContentType:
      type: string
      enum:
        - TEXT
        - VIDEO
        - AUDIO
        - DOCUMENT
        - INTERACTIVE
      description: |
        ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ã‚¤ãƒ—
        - `TEXT`: ãƒ†ã‚­ã‚¹ãƒˆ
        - `VIDEO`: å‹•ç”»
        - `AUDIO`: éŸ³å£°
        - `DOCUMENT`: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
        - `INTERACTIVE`: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„

    ContentDifficulty:
      type: string
      enum:
        - BEGINNER
        - INTERMEDIATE
        - ADVANCED
        - EXPERT
      description: |
        ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é›£æ˜“åº¦
        - `BEGINNER`: åˆç´š
        - `INTERMEDIATE`: ä¸­ç´š
        - `ADVANCED`: ä¸Šç´š
        - `EXPERT`: ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆ

    QuizDifficulty:
      type: string
      enum:
        - EASY
        - MEDIUM
        - HARD
      description: |
        ã‚¯ã‚¤ã‚ºé›£æ˜“åº¦
        - `EASY`: ç°¡å˜
        - `MEDIUM`: æ™®é€š
        - `HARD`: é›£ã—ã„

    QuizStatus:
      type: string
      enum:
        - NOT_STARTED
        - IN_PROGRESS
        - COMPLETED
      description: |
        ã‚¯ã‚¤ã‚ºå—é¨“çŠ¶æ³
        - `NOT_STARTED`: æœªå—é¨“
        - `IN_PROGRESS`: å—é¨“ä¸­
        - `COMPLETED`: å®Œäº†

    # ======================================
    # âš ï¸ ã‚¨ãƒ©ãƒ¼é–¢é€£ã‚¹ã‚­ãƒ¼ãƒ
    # ======================================
    ErrorResponse:
      type: object
      properties:
        error:
          type: string
          description: ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰
          example: "VALIDATION_ERROR"
        message:
          type: string
          description: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
          example: "å…¥åŠ›å€¤ã«ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Šã¾ã™"
        details:
          type: array
          items:
            type: object
            properties:
              field:
                type: string
                description: ã‚¨ãƒ©ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
                example: "name"
              message:
                type: string
                description: ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å›ºæœ‰ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
                example: "åå‰ã¯å¿…é ˆé …ç›®ã§ã™"
        timestamp:
          type: string
          format: date-time
          description: ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚åˆ»
          example: "2025-08-18T10:30:00Z"
        path:
          type: string
          description: ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸAPIãƒ‘ã‚¹
          example: "/api/learning/spaces"

  responses:
    # ======================================
    # ğŸ”„ å…±é€šãƒ¬ã‚¹ãƒãƒ³ã‚¹å®šç¾©
    # ======================================
    BadRequestError:
      description: ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒä¸æ­£ã§ã™
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: "VALIDATION_ERROR"
            message: "å…¥åŠ›å€¤ã«ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Šã¾ã™"
            details:
              - field: "name"
                message: "åå‰ã¯å¿…é ˆé …ç›®ã§ã™"
            timestamp: "2025-08-18T10:30:00Z"
            path: "/api/learning/spaces"

    UnauthorizedError:
      description: èªè¨¼ãŒå¿…è¦ã§ã™
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: "UNAUTHORIZED"
            message: "èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ãŒå¿…è¦ã§ã™"
            timestamp: "2025-08-18T10:30:00Z"
            path: "/api/learning/spaces"

    ForbiddenError:
      description: ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: "FORBIDDEN"
            message: "ã“ã®æ“ä½œã‚’å®Ÿè¡Œã™ã‚‹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“"
            timestamp: "2025-08-18T10:30:00Z"
            path: "/api/learning/spaces/1"

    NotFoundError:
      description: ãƒªã‚½ãƒ¼ã‚¹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: "NOT_FOUND"
            message: "æŒ‡å®šã•ã‚ŒãŸå­¦ç¿’ç©ºé–“ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"
            timestamp: "2025-08-18T10:30:00Z"
            path: "/api/learning/spaces/999"

    InternalServerError:
      description: ã‚µãƒ¼ãƒãƒ¼å†…éƒ¨ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: "INTERNAL_SERVER_ERROR"
            message: "ã‚µãƒ¼ãƒãƒ¼å†…éƒ¨ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ"
            timestamp: "2025-08-18T10:30:00Z"
            path: "/api/learning/spaces"
