openapi: 3.0.0
info:
  title: SFR Crypto Asset API
  description: |
    ğŸª™ **SFR (Soundtrack For Revolution) æš—å·è³‡ç”£ç®¡ç†API**
    
    SFRæš—å·è³‡ç”£ã®ç™ºè¡Œã€å¾´åã€ç®¡ç†ã€ã‚¬ãƒãƒŠãƒ³ã‚¹æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹REST APIã§ã™ã€‚
    
    ## ä¸»è¦æ©Ÿèƒ½
    - ğŸ’° **ãƒˆãƒ¼ã‚¯ãƒ³ç™ºè¡Œ**: æ•™è‚²ãƒ»å‰µä½œæ´»å‹•ã¸ã®å ±é…¬ç™ºè¡Œ
    - ğŸ’¸ **ãƒˆãƒ¼ã‚¯ãƒ³å¾´å**: AIåˆ¤æ–­ã«ã‚ˆã‚‹å‹•çš„å¾´åã‚·ã‚¹ãƒ†ãƒ 
    - ğŸ—³ï¸ **ã‚¬ãƒãƒŠãƒ³ã‚¹**: è©•è­°å“¡åˆ¶åº¦ã«ã‚ˆã‚‹æ„æ€æ±ºå®š
    - ğŸ“Š **çµ±è¨ˆãƒ»åˆ†æ**: æµé€šé‡ãƒ»ç™ºè¡Œé‡ã®ç›£è¦–
    - ğŸ” **ç›£æŸ»æ©Ÿèƒ½**: å…¨å–å¼•ã®è¿½è·¡ãƒ»ãƒ­ã‚°ç®¡ç†
    JWTãƒˆãƒ¼ã‚¯ãƒ³ã«ã‚ˆã‚‹èªè¨¼ãŒå¿…è¦ã§ã™ã€‚ãƒ˜ãƒƒãƒ€ãƒ¼ã« `Authorization: Bearer {token}` ã‚’å«ã‚ã¦ãã ã•ã„ã€‚
    
  version: 1.0.0
  contact:
    name: SFR.TOKYO Development Team
    email: dev@sfr.tokyo
  license:
                  type: number
                  minimum: 0
                  maximum: 1
    url: https://opensource.org/licenses/MIT
                  type: number
                  minimum: 0
                  maximum: 1
servers:
  - url: https://api.sfr.tokyo/v1
    description: Production server
  - url: https://staging-api.sfr.tokyo/v1
    description: Staging server
  - url: http://localhost:8080/api/v1
    description: Development server
            rounding_mode:
              type: string
              enum: [TRUNCATE_DOWN]
              description: å°æ•°è¨ˆç®—æ™‚ã®ä¸¸ã‚æ–¹é‡ (ç¾åœ¨ã¯å¸¸ã«åˆ‡ã‚Šæ¨ã¦)

security:
  - BearerAuth: []

tags:
  - name: Token Management
              type: string
              enum: [v1]
  - name: Rewards
    description: å ±é…¬ç™ºè¡Œãƒ»åˆ†é…ã‚·ã‚¹ãƒ†ãƒ 
  - name: Collections
    description: ãƒˆãƒ¼ã‚¯ãƒ³å¾´åãƒ»ãƒãƒ¼ãƒ³æ©Ÿèƒ½
  - name: Governance
    description: ã‚¬ãƒãƒŠãƒ³ã‚¹ãƒ»è©•è­°å“¡æ©Ÿèƒ½
  - name: Statistics
    description: çµ±è¨ˆãƒ»åˆ†æãƒ»ãƒ¬ãƒãƒ¼ãƒˆ
  - name: Oracle
    description: å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ãƒ¼ãƒ‰
  - name: Audit
    description: ç›£æŸ»ãƒ»ãƒ­ã‚°æ©Ÿèƒ½

paths:
  # ==================== Token Management ====================
  /sfr/balance/{user_id}:
    get:
      tags: [Token Management]
      summary: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ®‹é«˜ç…§ä¼š
      description: æŒ‡å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã®SFRæ®‹é«˜ã¨å–å¼•å±¥æ­´ã‚µãƒãƒªãƒ¼ã‚’å–å¾—
      parameters:
        - name: user_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
      responses:
        '200':
          description: æ®‹é«˜æƒ…å ±å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserBalance'
        '404':
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚‰ãªã„
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /sfr/balance/{user_id}/history:
    get:
      tags: [Token Management]
      summary: æ®‹é«˜å¤‰å‹•å±¥æ­´å–å¾—
      description: |
        ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ®‹é«˜å¤‰å‹•å±¥æ­´ã‚’å–å¾—ï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œï¼‰
        NOTE: äº’æ›ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ã¯å†…éƒ¨çµ±ä¸€æ–¹é‡ã«åˆã‚ã› 0 å§‹ã¾ã‚Šã® page_index / page_size ã‚’æ¡ç”¨ã€‚
              ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã® pagination.page ã¯ 1 å§‹ã¾ã‚Šã§è¡¨ç¤ºäº’æ›ã‚’ç¶­æŒã€‚
      parameters:
        - name: user_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: page_index
          in: query
          schema:
            type: integer
            minimum: 0
            default: 0
          description: 0 å§‹ã¾ã‚Šãƒšãƒ¼ã‚¸ç•ªå· (UI è¡¨ç¤ºã¯ +1 ã® 1 å§‹ã¾ã‚Š)
        - name: page_size
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          description: 1 ãƒšãƒ¼ã‚¸ä»¶æ•° (1ã€œ100)
        - name: transaction_type
          in: query
          schema:
            type: string
            enum: [EARN, SPEND, COLLECT, BURN, TRANSFER]
        - name: from_date
          in: query
          schema:
            type: string
            format: date
        - name: to_date
          in: query
          schema:
            type: string
            format: date
      responses:
        '200':
          description: å±¥æ­´å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BalanceHistoryResponse'

  /sfr/transfer:
    post:
      tags: [Token Management]
      summary: SFRé€é‡‘
      description: ãƒ¦ãƒ¼ã‚¶ãƒ¼é–“ã§SFRãƒˆãƒ¼ã‚¯ãƒ³ã‚’é€é‡‘
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TransferRequest'
      responses:
        '200':
          description: é€é‡‘æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransferResponse'
        '400':
          description: é€é‡‘å¤±æ•—ï¼ˆæ®‹é«˜ä¸è¶³ãªã©ï¼‰
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # ==================== Rewards ====================
  /sfr/rewards/issue:
    post:
      tags: [Rewards]
      summary: å ±é…¬ç™ºè¡Œ
      description: |-
        ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ´»å‹•ãƒ»è©•ä¾¡ã‚¹ã‚³ã‚¢ã«åŸºã¥ã„ã¦SFRå ±é…¬ã‚’ç™ºè¡Œã€‚
        ç¾è¡Œãƒ•ã‚©ãƒ¼ãƒŸãƒ¥ãƒ©(äº’æ›å±¤å®Ÿè£…æº–æ‹  / å°†æ¥å¤‰æ›´å¯):
          combined_score = activity_score * 0.5 + evaluation_score * 20 * 0.5
          reward_amount = combined_score / 500  (çµæœã¯ 8 æ¡å°æ•°ã§åˆ‡ã‚Šæ¨ã¦)
        evaluation_score ã¯ 1.0â€“5.0 ã‚’ 20 å€ã—ã¦ activity_score ã‚¹ã‚±ãƒ¼ãƒ« (0â€“100) ã«æ­£è¦åŒ–ã€‚
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RewardIssueRequest'
      responses:
        '200':
          description: å ±é…¬ç™ºè¡ŒæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RewardIssueResponse'
        '400':
          description: ç™ºè¡Œå¤±æ•—ï¼ˆãƒ—ãƒ¼ãƒ«ä¸è¶³ãªã©ï¼‰
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /sfr/rewards/calculate:
    post:
      tags: [Rewards]
      summary: å ±é…¬è¨ˆç®—ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
      description: |-
        å®Ÿéš›ã®ç™ºè¡Œå‰ã«å ±é…¬é¡ã‚’è¨ˆç®—ï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ã€‚
        è¨ˆç®—å¼(äº’æ›å±¤):
          combined_score = activity_score * 0.6 + evaluation_score * 20 * 0.4
          estimated_reward = combined_score / 1000  (8 æ¡å°æ•°ã§åˆ‡ã‚Šæ¨ã¦)
        é‡ã¿/é™¤æ•°ã¯äº’æ›ãƒ¬ã‚¤ãƒ¤ãƒ¼å®šæ•°ã¨ã—ã¦ç®¡ç†ã•ã‚Œå°†æ¥èª¿æ•´å¯ã€‚
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RewardCalculateRequest'
      responses:
        '200':
          description: è¨ˆç®—æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RewardCalculateResponse'

  /sfr/rewards/daily-distribution:
    post:
      tags: [Rewards]
      summary: æ—¥æ¬¡å ±é…¬åˆ†é…å®Ÿè¡Œ
      description: ãã®æ—¥ã®å…¨å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯¾ã—ã¦ä¸€æ‹¬å ±é…¬åˆ†é…ã‚’å®Ÿè¡Œ
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DailyDistributionRequest'
      responses:
        '200':
          description: åˆ†é…æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DailyDistributionResponse'

  /sfr/rewards/history/{user_id}:
    get:
      tags: [Rewards]
      summary: ãƒ¦ãƒ¼ã‚¶ãƒ¼å ±é…¬å±¥æ­´
      description: æŒ‡å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å ±é…¬å—çµ¦å±¥æ­´ã‚’å–å¾—
      parameters:
        - name: user_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: page
          in: query
          schema:
            type: integer
            minimum: 1
            default: 1
          description: 1å§‹ã¾ã‚Šãƒšãƒ¼ã‚¸ç•ªå·
        - name: page_size
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 50
            default: 20
          description: 1ãƒšãƒ¼ã‚¸ä»¶æ•° (1ã€œ50)
        - name: limit
          in: query
          deprecated: true
          schema:
            type: integer
            minimum: 1
            maximum: 50
            default: 20
          description: å»ƒæ­¢äºˆå®šã€‚page_size ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
      responses:
        '200':
          description: å±¥æ­´å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RewardHistoryResponse'

  # ==================== Collections ====================
  /sfr/collections/collect:
    post:
      tags: [Collections]
      summary: ãƒˆãƒ¼ã‚¯ãƒ³å¾´åå®Ÿè¡Œ
      description: æŒ‡å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰SFRãƒˆãƒ¼ã‚¯ãƒ³ã‚’å¾´å
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CollectionRequest'
      responses:
        '200':
          description: å¾´åæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CollectionResponse'
        '400':
          description: å¾´åå¤±æ•—
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /sfr/collections/monthly-collection:
    post:
      tags: [Collections]
      summary: æœˆæ¬¡ä¸€æ‹¬å¾´åå®Ÿè¡Œ
      description: å¾´åå¯¾è±¡ã®å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ä¸€æ‹¬ã§ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å¾´å
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MonthlyCollectionRequest'
      responses:
        '200':
          description: ä¸€æ‹¬å¾´åæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MonthlyCollectionResponse'

  /sfr/collections/burn-decision:
    post:
      tags: [Collections]
      summary: AI ãƒãƒ¼ãƒ³åˆ¤æ–­å®Ÿè¡Œ
      description: AIã«ã‚ˆã‚‹ãƒˆãƒ¼ã‚¯ãƒ³ãƒãƒ¼ãƒ³/ãƒªã‚¶ãƒ¼ãƒ–åˆ¤æ–­ã‚’å®Ÿè¡Œ
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BurnDecisionRequest'
      responses:
        '200':
          description: AIåˆ¤æ–­å®Ÿè¡ŒæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BurnDecisionResponse'

  /sfr/collections/history:
    get:
      tags: [Collections]
      summary: å¾´åå±¥æ­´å–å¾—
      description: ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®å¾´åå±¥æ­´ã‚’å–å¾—
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            minimum: 1
            default: 1
          description: 1å§‹ã¾ã‚Šãƒšãƒ¼ã‚¸ç•ªå·
        - name: page_size
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          description: 1ãƒšãƒ¼ã‚¸ä»¶æ•° (1ã€œ100)
        - name: limit
          in: query
          deprecated: true
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          description: å»ƒæ­¢äºˆå®šã€‚page_size ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
        - name: from_date
          in: query
          schema:
            type: string
            format: date
        - name: to_date
          in: query
          schema:
            type: string
            format: date
        - name: destination
          in: query
          schema:
            type: string
            enum: [BURN, RESERVE, REDISTRIBUTE]
      responses:
        '200':
          description: å±¥æ­´å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CollectionHistoryResponse'

  # ==================== Governance ====================
  /sfr/governance/council/members:
    get:
      tags: [Governance]
      summary: ç¾åœ¨ã®è©•è­°å“¡ä¸€è¦§
      description: ç¾åœ¨æ´»å‹•ä¸­ã®è©•è­°å“¡ãƒªã‚¹ãƒˆã‚’å–å¾—
      responses:
        '200':
          description: è©•è­°å“¡ä¸€è¦§å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CouncilMembersResponse'

  /sfr/governance/council/appoint:
    post:
      tags: [Governance]
      summary: è©•è­°å“¡ä»»å‘½
      description: æ–°ã—ã„è©•è­°å“¡ã‚’ä»»å‘½
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CouncilAppointRequest'
      responses:
        '200':
          description: ä»»å‘½æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CouncilAppointResponse'

  /sfr/governance/proposals:
    get:
      tags: [Governance]
      summary: ææ¡ˆä¸€è¦§å–å¾—
      description: ææ¡ˆã®ä¸€è¦§ã‚’å–å¾—ï¼ˆãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ»ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œï¼‰
      parameters:
        - name: status
          in: query
          schema:
            type: string
            enum: [DRAFT, VOTING, PASSED, REJECTED, EXPIRED]
        - name: proposal_type
          in: query
          schema:
            type: string
            enum: [POLICY, PARAMETER, FEATURE, GOVERNANCE]
        - name: page
          in: query
          schema:
            type: integer
            minimum: 1
            default: 1
          description: 1å§‹ã¾ã‚Šãƒšãƒ¼ã‚¸ç•ªå·
        - name: page_size
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 50
            default: 20
          description: 1ãƒšãƒ¼ã‚¸ä»¶æ•° (1ã€œ50)
        - name: limit
          in: query
          deprecated: true
          schema:
            type: integer
            minimum: 1
            maximum: 50
            default: 20
          description: å»ƒæ­¢äºˆå®šã€‚page_size ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
      responses:
        '200':
          description: ææ¡ˆä¸€è¦§å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProposalsResponse'

    post:
      tags: [Governance]
      summary: æ–°ææ¡ˆä½œæˆ
      description: æ–°ã—ã„ã‚¬ãƒãƒŠãƒ³ã‚¹ææ¡ˆã‚’ä½œæˆ
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateProposalRequest'
      responses:
        '201':
          description: ææ¡ˆä½œæˆæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateProposalResponse'

  /sfr/governance/proposals/{proposal_id}:
    get:
      tags: [Governance]
      summary: ææ¡ˆè©³ç´°å–å¾—
      description: æŒ‡å®šææ¡ˆã®è©³ç´°æƒ…å ±ã‚’å–å¾—
      parameters:
        - name: proposal_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: ææ¡ˆè©³ç´°å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProposalDetail'

  /sfr/governance/proposals/{proposal_id}/vote:
    post:
      tags: [Governance]
      summary: ææ¡ˆæŠ•ç¥¨
      description: æŒ‡å®šææ¡ˆã«å¯¾ã—ã¦æŠ•ç¥¨
      parameters:
        - name: proposal_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VoteRequest'
      responses:
        '200':
          description: æŠ•ç¥¨æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VoteResponse'

  /sfr/governance/votes/{user_id}:
    get:
      tags: [Governance]
      summary: ãƒ¦ãƒ¼ã‚¶ãƒ¼æŠ•ç¥¨å±¥æ­´
      description: æŒ‡å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æŠ•ç¥¨å±¥æ­´ã‚’å–å¾—
      parameters:
        - name: user_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: page
          in: query
          schema:
            type: integer
            minimum: 1
            default: 1
          description: 1å§‹ã¾ã‚Šãƒšãƒ¼ã‚¸ç•ªå·
        - name: page_size
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 50
            default: 20
          description: 1ãƒšãƒ¼ã‚¸ä»¶æ•° (1ã€œ50)
        - name: limit
          in: query
          deprecated: true
          schema:
            type: integer
            minimum: 1
            maximum: 50
            default: 20
          description: å»ƒæ­¢äºˆå®šã€‚page_size ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
      responses:
        '200':
          description: æŠ•ç¥¨å±¥æ­´å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserVotesResponse'

  # ==================== Statistics ====================
  /sfr/stats/overview:
    get:
      tags: [Statistics]
      summary: SFRçµ±è¨ˆæ¦‚è¦
      description: SFRãƒˆãƒ¼ã‚¯ãƒ³ã®æµé€šé‡ã€ç™ºè¡Œé‡ã€ãƒ›ãƒ«ãƒ€ãƒ¼æ•°ãªã©ã®çµ±è¨ˆæ¦‚è¦
      responses:
        '200':
          description: çµ±è¨ˆæ¦‚è¦å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatsOverview'

  /sfr/stats/circulation:
    get:
      tags: [Statistics]
      summary: æµé€šé‡çµ±è¨ˆ
      description: æ—¥æ¬¡ãƒ»æœˆæ¬¡ã®æµé€šé‡æ¨ç§»ãƒ‡ãƒ¼ã‚¿
      parameters:
        - name: period
          in: query
          schema:
            type: string
            enum: [daily, weekly, monthly]
            default: daily
        - name: days
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 365
            default: 30
      responses:
        '200':
          description: æµé€šé‡çµ±è¨ˆå–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CirculationStats'

  /sfr/stats/rewards:
    get:
      tags: [Statistics]
      summary: å ±é…¬çµ±è¨ˆ
      description: æœŸé–“åˆ¥ã®å ±é…¬ç™ºè¡Œçµ±è¨ˆ
      parameters:
        - name: from_date
          in: query
          schema:
            type: string
            format: date
        - name: to_date
          in: query
          schema:
            type: string
            format: date
        - name: group_by
          in: query
          schema:
            type: string
            enum: [day, week, month]
            default: day
      responses:
        '200':
          description: å ±é…¬çµ±è¨ˆå–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RewardStats'

  /sfr/stats/top-holders:
    get:
      tags: [Statistics]
      summary: ä¸Šä½ãƒ›ãƒ«ãƒ€ãƒ¼
      description: SFRä¿æœ‰é‡ä¸Šä½ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ©ãƒ³ã‚­ãƒ³ã‚°
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
          description: ä¸Šä½ä»¶æ•° (å°†æ¥çš„ã« page_size ã¸çµ±ä¸€äºˆå®š)
      responses:
        '200':
          description: ä¸Šä½ãƒ›ãƒ«ãƒ€ãƒ¼å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TopHoldersResponse'

  # ==================== Oracle ====================
  /sfr/oracle/feeds:
    get:
      tags: [Oracle]
      summary: Oracle ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ãƒ¼ãƒ‰ä¸€è¦§
      description: å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ãƒ¼ãƒ‰ã®æœ€æ–°æƒ…å ±ã‚’å–å¾—
      parameters:
        - name: source
          in: query
          schema:
            type: string
        - name: data_type
          in: query
          schema:
            type: string
            enum: [PRICE, VOLUME, LIQUIDITY, RATE]
        - name: page_size
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          description: 1ãƒšãƒ¼ã‚¸ä»¶æ•° (1ã€œ100)
        - name: limit
          in: query
          deprecated: true
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          description: å»ƒæ­¢äºˆå®šã€‚page_size ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
      responses:
        '200':
          description: Oracle ãƒ‡ãƒ¼ã‚¿å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OracleFeedsResponse'

    post:
      tags: [Oracle]
      summary: Oracle ãƒ‡ãƒ¼ã‚¿æ›´æ–°
      description: å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ãƒ¼ãƒ‰ã‚’æ›´æ–°
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OracleFeedUpdateRequest'
      responses:
        '200':
          description: ãƒ‡ãƒ¼ã‚¿æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OracleFeedUpdateResponse'

  # ==================== Audit ====================
  /sfr/audit/parameters:
    get:
      tags: [Audit]
      summary: ã‚·ã‚¹ãƒ†ãƒ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¸€è¦§
      description: ç¾åœ¨ã®ã‚·ã‚¹ãƒ†ãƒ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¨­å®šå€¤ã‚’å–å¾—
      responses:
        '200':
          description: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¸€è¦§å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SystemParametersResponse'

  /sfr/audit/parameters/{parameter_name}:
    put:
      tags: [Audit]
      summary: ã‚·ã‚¹ãƒ†ãƒ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ›´æ–°
      description: æŒ‡å®šã‚·ã‚¹ãƒ†ãƒ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å€¤ã‚’æ›´æ–°
      parameters:
        - name: parameter_name
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ParameterUpdateRequest'
      responses:
        '200':
          description: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ParameterUpdateResponse'

  /sfr/audit/adjustments:
    get:
      tags: [Audit]
      summary: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´ãƒ­ã‚°
      description: ã‚·ã‚¹ãƒ†ãƒ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å¤‰æ›´å±¥æ­´ã‚’å–å¾—
      parameters:
        - name: parameter_name
          in: query
          schema:
            type: string
        - name: trigger_type
          in: query
          schema:
            type: string
            enum: [MANUAL, AUTO_AI, ORACLE, GOVERNANCE]
        - name: page
          in: query
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
      responses:
        '200':
          description: èª¿æ•´ãƒ­ã‚°å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdjustmentLogsResponse'

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    # ==================== Base Schemas ====================
    ErrorResponse:
      type: object
      properties:
        error:
          type: string
          description: ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ (ä¾‹: BAD_REQUEST, VALIDATION_ERROR, NOT_FOUND)
        message:
          type: string
          description: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ¦‚è¦
        details:
          oneOf:
            - type: array
              description: ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å˜ä½ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è©³ç´° (VALIDATION_ERROR æ™‚)
              items:
                type: object
                properties:
                  field:
                    type: string
                  message:
                    type: string
                required: [field, message]
            - type: object
              description: ãã®ä»–ä»»æ„ã®è¿½åŠ ãƒ¡ã‚¿æƒ…å ±
          nullable: true
        timestamp:
          type: string
          format: date-time
        path:
          type: string
          description: ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ã‚¹
      required: [error, message, timestamp]
  # NOTE: details ã¯å®Ÿè£…ã§ Object å‹: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ™‚ã¯ [{field,message}] é…åˆ—ã€ãã‚Œä»¥å¤– null ã¾ãŸã¯å°†æ¥çš„ã«æ‹¡å¼µã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ

    PaginationInfo:
      type: object
      properties:
        page:
          type: integer
          minimum: 1
        limit:
          type: integer
          minimum: 1
          description: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå…¥åŠ›ã¯ page_size (0 å§‹ã¾ã‚Š page_index ã¨ä½µç”¨) ã‚’å—ã‘å–ã‚Šå†…éƒ¨ã§ limit ã«ãƒãƒƒãƒ”ãƒ³ã‚°
        total_pages:
          type: integer
          minimum: 0
        total_count:
          type: integer
          minimum: 0
        has_next:
          type: boolean
        has_previous:
          type: boolean
      required: [page, limit, total_pages, total_count, has_next, has_previous]

    # ==================== Token Management ====================
    UserBalance:
      type: object
      properties:
        user_id:
          type: string
          format: uuid
        current_balance:
          type: string
          pattern: '^\d+\.\d{8}$'
          description: ç¾åœ¨æ®‹é«˜ï¼ˆ8æ¡å°æ•°ï¼‰
        total_earned:
          type: string
          pattern: '^\d+\.\d{8}$'
          description: ç´¯è¨ˆç²å¾—é¡
        total_spent:
          type: string
          pattern: '^\d+\.\d{8}$'
          description: ç´¯è¨ˆä½¿ç”¨é¡
        total_collected:
          type: string
          pattern: '^\d+\.\d{8}$'
          description: ç´¯è¨ˆå¾´åé¡
        last_collection_date:
          type: string
          format: date
          nullable: true
        collection_exempt:
          type: boolean
          description: å¾´åå…é™¤ãƒ•ãƒ©ã‚°
        frozen:
          type: boolean
          description: æ®‹é«˜å‡çµãƒ•ãƒ©ã‚°
        updated_at:
          type: string
          format: date-time
      required: [user_id, current_balance, total_earned, total_spent, total_collected, collection_exempt, frozen, updated_at]

    BalanceHistory:
      type: object
      properties:
        history_id:
          type: string
        user_id:
          type: string
          format: uuid
        transaction_type:
          type: string
          enum: [EARN, SPEND, COLLECT, BURN, TRANSFER]
        amount:
          type: string
          pattern: '^\d+\.\d{8}$'
        balance_before:
          type: string
          pattern: '^\d+\.\d{8}$'
        balance_after:
          type: string
          pattern: '^\d+\.\d{8}$'
        reason:
          type: string
          maxLength: 100
        reference_id:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
      required: [history_id, user_id, transaction_type, amount, balance_before, balance_after, reason, created_at]

    BalanceHistoryResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/BalanceHistory'
        pagination:
          $ref: '#/components/schemas/PaginationInfo'
      required: [data, pagination]

    TransferRequest:
      type: object
      properties:
        from_user_id:
          type: string
          format: uuid
        to_user_id:
          type: string
          format: uuid
        amount:
          type: string
          pattern: '^\d+\.\d{1,8}$'
          description: 1ã€œ8æ¡ã®å°æ•° (å†…éƒ¨ã¯åˆ‡ã‚Šæ¨ã¦ã§8æ¡ã«æ­£è¦åŒ–)
        reason:
          type: string
          maxLength: 100
        note:
          type: string
          maxLength: 500
          nullable: true
      required: [from_user_id, to_user_id, amount, reason]

    TransferResponse:
      type: object
      properties:
        transfer_id:
          type: string
        from_user_id:
          type: string
          format: uuid
        to_user_id:
          type: string
          format: uuid
        amount:
          type: string
          pattern: '^\d+\.\d{8}$'
          description: 8æ¡å›ºå®šå°æ•°è¡¨ç¤º (1ã€œ8æ¡å…¥åŠ›ã‚’å†…éƒ¨ã§ 8 æ¡ã«æ­£è¦åŒ–ã—ã‚¼ãƒ­ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°)
        from_balance_after:
          type: string
          pattern: '^\d+\.\d{8}$'
          description: é€é‡‘å¾Œé€é‡‘è€…æ®‹é«˜ (8æ¡å›ºå®š)
        to_balance_after:
          type: string
          pattern: '^\d+\.\d{8}$'
          description: é€é‡‘å¾Œå—å–è€…æ®‹é«˜ (8æ¡å›ºå®š)
        processed_at:
          type: string
          format: date-time
      required: [transfer_id, from_user_id, to_user_id, amount, from_balance_after, to_balance_after, processed_at]

    # ==================== Rewards ====================
    RewardIssueRequest:
      type: object
      properties:
        user_id:
          type: string
          format: uuid
        activity_score:
          type: number
          format: double
          minimum: 0
          maximum: 100
          description: æ´»å‹•ã‚¹ã‚³ã‚¢ (0ã€œ100)
        evaluation_score:
          type: number
          format: double
          minimum: 1.0
          maximum: 5.0
          description: è©•ä¾¡ã‚¹ã‚³ã‚¢ (1.0ã€œ5.0)
        reward_reason:
          type: string
          maxLength: 200
        force_issue:
          type: boolean
          default: false
          description: ãƒ—ãƒ¼ãƒ«ä¸è¶³ã§ã‚‚å¼·åˆ¶ç™ºè¡Œã™ã‚‹ã‹
      required: [user_id, activity_score, evaluation_score, reward_reason]

    RewardIssueResponse:
      type: object
      properties:
        reward_id:
          type: string
        user_id:
          type: string
          format: uuid
        reward_amount:
          type: string
          pattern: '^\d+\.\d{8}$'
          description: ç™ºè¡Œå ±é…¬é¡ (8æ¡å›ºå®šå°æ•°, formula: (activity_score*0.5 + evaluation_score*20*0.5)/500 åˆ‡ã‚Šæ¨ã¦å¾Œã‚¼ãƒ­ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°)
        pool_date:
          type: string
          format: date
        combined_score:
          type: number
          format: double
        total_pool_score:
          type: number
          format: double
        calculation_details:
          type: object
          description: è¨ˆç®—è©³ç´°
          properties:
            activity_score:
              type: number
              format: double
              description: å…¥åŠ› activity_score (0-100)
            evaluation_score:
              type: number
              format: double
              description: å…¥åŠ› evaluation_score (1.0-5.0)
            normalized_evaluation_score:
              type: number
              format: double
              description: evaluation_score * 20 ã«ã‚ˆã‚‹ 20-100 ã‚¹ã‚±ãƒ¼ãƒ«æ­£è¦åŒ–å€¤
            weights:
              type: object
              properties:
                activity:
                  type: number
                evaluation:
                  type: number
            divisors:
              type: object
              properties:
                calculate:
                  type: integer
                issue:
                  type: integer
            combined_before_divisor:
              type: number
              format: double
              description: é‡ã¿é©ç”¨å¾Œ (ã¾ã é™¤æ•°ã§å‰²ã‚‹å‰) ã®åˆç®—ã‚¹ã‚³ã‚¢
            formula_version:
              type: string
          required: [activity_score, evaluation_score, normalized_evaluation_score, weights, divisors, combined_before_divisor, formula_version]
        issued_at:
          type: string
          format: date-time
      required: [reward_id, user_id, reward_amount, pool_date, combined_score, total_pool_score, issued_at]

    RewardCalculateRequest:
      type: object
      properties:
        user_id:
          type: string
          format: uuid
        activity_score:
          type: number
          format: double
          minimum: 0
          maximum: 100
          description: æ´»å‹•ã‚¹ã‚³ã‚¢ (0ã€œ100)
        evaluation_score:
          type: number
          format: double
          minimum: 1.0
          maximum: 5.0
          description: è©•ä¾¡ã‚¹ã‚³ã‚¢ (1.0ã€œ5.0)
        target_date:
          type: string
          format: date
          nullable: true
          description: è¨ˆç®—å¯¾è±¡æ—¥ï¼ˆæŒ‡å®šãªã—ã¯å½“æ—¥ï¼‰
      required: [user_id, activity_score, evaluation_score]

    RewardCalculateResponse:
      type: object
      properties:
        user_id:
          type: string
          format: uuid
        estimated_reward:
          type: string
          pattern: '^\d+\.\d{8}$'
          description: ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ã¿ã§å®Ÿéš›æœªä»˜ä¸ã®æ¨å®šå€¤ (8æ¡å›ºå®š, formula: (act*0.6 + eval*20*0.4)/1000)
        combined_score:
          type: number
          format: double
        current_pool_total:
          type: string
          pattern: '^\d+\.\d{8}$'
          description: è¨ˆç®—æ™‚ç‚¹ã®ãƒ—ãƒ¼ãƒ«ç·é‡ (8æ¡å›ºå®š)
        current_pool_remaining:
          type: string
          pattern: '^\d+\.\d{8}$'
          description: æ¨å®šå ±é…¬ä»®å¼•å½“å¾Œã®æ®‹é‡ (8æ¡å›ºå®š)
        total_participants:
          type: integer
        calculation_details:
          type: object
          description: è¨ˆç®—è©³ç´°
          properties:
            activity_score:
              type: number
              format: double
            evaluation_score:
              type: number
              format: double
            normalized_evaluation_score:
              type: number
              format: double
              description: evaluation_score * 20
            weights:
              type: object
              properties:
                activity:
                  type: number
                  minimum: 0
                  maximum: 1
                evaluation:
                  type: number
                  minimum: 0
                  maximum: 1
            divisors:
              type: object
              properties:
                calculate:
                  type: integer
                issue:
                  type: integer
            combined_before_divisor:
              type: number
              format: double
              description: é™¤æ•°é©ç”¨å‰ã‚¹ã‚³ã‚¢ (act*0.6 + eval*20*0.4)
            formula_version:
              type: string
              enum: [v1]
            rounding_mode:
              type: string
              enum: [TRUNCATE_DOWN]
              description: å°æ•°è¨ˆç®—æ™‚ã®ä¸¸ã‚æ–¹é‡ (ç¾åœ¨ã¯å¸¸ã«åˆ‡ã‚Šæ¨ã¦)
          required: [activity_score, evaluation_score, normalized_evaluation_score, weights, divisors, combined_before_divisor, formula_version]
      required: [user_id, estimated_reward, combined_score, current_pool_total, current_pool_remaining, total_participants]

    DailyDistributionRequest:
      type: object
      properties:
        target_date:
          type: string
          format: date
        dry_run:
          type: boolean
          default: false
          description: å®Ÿè¡Œå‰ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰
        force_redistribution:
          type: boolean
          default: false
          description: æ—¢ã«åˆ†é…æ¸ˆã¿ã§ã‚‚å†åˆ†é…ã™ã‚‹ã‹
      required: [target_date]

    DailyDistributionResponse:
      type: object
      properties:
        target_date:
          type: string
          format: date
        total_participants:
          type: integer
        total_distributed:
          type: string
          pattern: '^\d+\.\d{8}$'
        average_reward:
          type: string
          pattern: '^\d+\.\d{8}$'
        distribution_details:
          type: array
          items:
            type: object
            properties:
              user_id:
                type: string
                format: uuid
              reward_amount:
                type: string
                pattern: '^\d+\.\d{8}$'
              combined_score:
                type: number
                format: double
        processed_at:
          type: string
          format: date-time
      required: [target_date, total_participants, total_distributed, average_reward, distribution_details, processed_at]

    RewardHistoryResponse:
      type: object
      properties:
        data:
          type: array
          items:
            type: object
            properties:
              reward_id:
                type: string
              pool_date:
                type: string
                format: date
              reward_amount:
                type: string
                pattern: '^\d+\.\d{8}$'
              activity_score:
                type: number
                format: double
              evaluation_score:
                type: number
                format: double
              combined_score:
                type: number
                format: double
              reward_reason:
                type: string
              created_at:
                type: string
                format: date-time
        pagination:
          $ref: '#/components/schemas/PaginationInfo'
      required: [data, pagination]

    # ==================== Collections ====================
    CollectionRequest:
      type: object
      properties:
        user_id:
          type: string
          format: uuid
        force_collection:
          type: boolean
          default: false
          description: å¾´åæ¡ä»¶ã‚’ç„¡è¦–ã—ã¦å¼·åˆ¶å¾´åã™ã‚‹ã‹
        collection_rate:
          type: number
          format: double
          minimum: 0.0001
          maximum: 1.0
          nullable: true
          description: å¾´åç‡ï¼ˆæŒ‡å®šãªã—ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
        collection_reason:
          type: string
          maxLength: 200
          nullable: true
      required: [user_id]

    CollectionResponse:
      type: object
      properties:
        collection_id:
          type: string
        user_id:
          type: string
          format: uuid
        balance_before:
          type: string
          pattern: '^\d+\.\d{8}$'
        collection_amount:
          type: string
          pattern: '^\d+\.\d{8}$'
        collection_rate:
          type: number
          format: double
        destination:
          type: string
          enum: [BURN, RESERVE, REDISTRIBUTE]
        ai_decision_id:
          type: string
          nullable: true
        processed_at:
          type: string
          format: date-time
      required: [collection_id, user_id, balance_before, collection_amount, collection_rate, destination, processed_at]

    MonthlyCollectionRequest:
      type: object
      properties:
        target_month:
          type: string
          pattern: '^\d{4}-\d{2}$'
          description: å¯¾è±¡æœˆï¼ˆYYYY-MMå½¢å¼ï¼‰
        dry_run:
          type: boolean
          default: false
        collection_threshold:
          type: string
          pattern: '^\d+\.\d{8}$'
          nullable: true
          description: å¾´åæœ€ä½æ®‹é«˜ï¼ˆæŒ‡å®šãªã—ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
      required: [target_month]

    MonthlyCollectionResponse:
      type: object
      properties:
        target_month:
          type: string
          pattern: '^\d{4}-\d{2}$'
        total_collected:
          type: string
          pattern: '^\d+\.\d{8}$'
        total_burned:
          type: string
          pattern: '^\d+\.\d{8}$'
        total_reserved:
          type: string
          pattern: '^\d+\.\d{8}$'
        affected_users:
          type: integer
        collection_details:
          type: array
          items:
            type: object
            properties:
              user_id:
                type: string
                format: uuid
              collection_amount:
                type: string
                pattern: '^\d+\.\d{8}$'
              destination:
                type: string
                enum: [BURN, RESERVE, REDISTRIBUTE]
        processed_at:
          type: string
          format: date-time
      required: [target_month, total_collected, total_burned, total_reserved, affected_users, collection_details, processed_at]

    BurnDecisionRequest:
      type: object
      properties:
        trigger_source:
          type: string
          maxLength: 100
          description: åˆ¤æ–­ãƒˆãƒªã‚¬ãƒ¼ã®æƒ…å ±æº
        market_data:
          type: object
          properties:
            price:
              type: number
              format: double
              nullable: true
            volume:
              type: number
              format: double
              nullable: true
            liquidity:
              type: number
              format: double
              nullable: true
          nullable: true
      required: [trigger_source]

    BurnDecisionResponse:
      type: object
      properties:
        decision_id:
          type: string
        decision_date:
          type: string
          format: date
        total_circulation:
          type: string
          pattern: '^\d+\.\d{8}$'
        total_issued:
          type: string
          pattern: '^\d+\.\d{8}$'
        ai_confidence:
          type: number
          format: double
          minimum: 0.0
          maximum: 1.0
        decision_result:
          type: string
          enum: [BURN, RESERVE]
        burned_amount:
          type: string
          pattern: '^\d+\.\d{8}$'
        reserved_amount:
          type: string
          pattern: '^\d+\.\d{8}$'
        reasoning:
          type: string
          description: AIåˆ¤æ–­ç†ç”±
        triggered_by:
          type: string
        created_at:
          type: string
          format: date-time
      required: [decision_id, decision_date, total_circulation, total_issued, ai_confidence, decision_result, burned_amount, reserved_amount, triggered_by, created_at]

    CollectionHistoryResponse:
      type: object
      properties:
        data:
          type: array
          items:
            type: object
            properties:
              collection_id:
                type: string
              user_id:
                type: string
                format: uuid
              collection_date:
                type: string
                format: date
              collection_amount:
                type: string
                pattern: '^\d+\.\d{8}$'
              destination:
                type: string
                enum: [BURN, RESERVE, REDISTRIBUTE]
              collection_reason:
                type: string
              created_at:
                type: string
                format: date-time
        pagination:
          $ref: '#/components/schemas/PaginationInfo'
      required: [data, pagination]

    # ==================== Governance ====================
    CouncilMembersResponse:
      type: object
      properties:
        data:
          type: array
          items:
            type: object
            properties:
              term_id:
                type: string
              user_id:
                type: string
                format: uuid
              start_date:
                type: string
                format: date
              end_date:
                type: string
                format: date
              status:
                type: string
                enum: [ACTIVE, COMPLETED, RESIGNED, REMOVED]
              voting_power:
                type: number
                format: double
              evaluation_count:
                type: integer
              proposal_count:
                type: integer
        total_members:
          type: integer
      required: [data, total_members]

    CouncilAppointRequest:
      type: object
      properties:
        user_id:
          type: string
          format: uuid
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        voting_power:
          type: number
          format: double
          default: 1.0
          minimum: 0.1
          maximum: 10.0
        appointment_reason:
          type: string
          maxLength: 200
      required: [user_id, start_date, end_date, appointment_reason]

    CouncilAppointResponse:
      type: object
      properties:
        term_id:
          type: string
        user_id:
          type: string
          format: uuid
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        voting_power:
          type: number
          format: double
        status:
          type: string
          enum: [ACTIVE]
        appointed_at:
          type: string
          format: date-time
      required: [term_id, user_id, start_date, end_date, voting_power, status, appointed_at]

    ProposalsResponse:
      type: object
      properties:
        data:
          type: array
          items:
            type: object
            properties:
              proposal_id:
                type: string
                format: uuid
              title:
                type: string
              proposal_type:
                type: string
                enum: [POLICY, PARAMETER, FEATURE, GOVERNANCE]
              created_by:
                type: string
                format: uuid
              status:
                type: string
                enum: [DRAFT, VOTING, PASSED, REJECTED, EXPIRED]
              voting_start:
                type: string
                format: date-time
              voting_end:
                type: string
                format: date-time
              total_votes:
                type: integer
              yes_votes:
                type: integer
              no_votes:
                type: integer
              created_at:
                type: string
                format: date-time
        pagination:
          $ref: '#/components/schemas/PaginationInfo'
      required: [data, pagination]

    CreateProposalRequest:
      type: object
      properties:
        title:
          type: string
          maxLength: 200
        description:
          type: string
          maxLength: 10000
        proposal_type:
          type: string
          enum: [POLICY, PARAMETER, FEATURE, GOVERNANCE]
        voting_duration_hours:
          type: integer
          minimum: 24
          maximum: 720
          default: 168
        quorum_required:
          type: integer
          minimum: 1
          default: 3
        approval_threshold:
          type: number
          format: double
          minimum: 0.5
          maximum: 1.0
          default: 0.6
      required: [title, description, proposal_type]

    CreateProposalResponse:
      type: object
      properties:
        proposal_id:
          type: string
          format: uuid
        title:
          type: string
        status:
          type: string
          enum: [DRAFT]
        voting_start:
          type: string
          format: date-time
        voting_end:
          type: string
          format: date-time
        created_at:
          type: string
          format: date-time
      required: [proposal_id, title, status, voting_start, voting_end, created_at]

    ProposalDetail:
      type: object
      properties:
        proposal_id:
          type: string
          format: uuid
        title:
          type: string
        description:
          type: string
        proposal_type:
          type: string
          enum: [POLICY, PARAMETER, FEATURE, GOVERNANCE]
        created_by:
          type: string
          format: uuid
        status:
          type: string
          enum: [DRAFT, VOTING, PASSED, REJECTED, EXPIRED]
        voting_start:
          type: string
          format: date-time
        voting_end:
          type: string
          format: date-time
        quorum_required:
          type: integer
        approval_threshold:
          type: number
          format: double
        total_votes:
          type: integer
        yes_votes:
          type: integer
        no_votes:
          type: integer
        abstain_votes:
          type: integer
        current_approval_rate:
          type: number
          format: double
        is_quorum_met:
          type: boolean
        votes_detail:
          type: array
          items:
            type: object
            properties:
              user_id:
                type: string
                format: uuid
              vote_choice:
                type: string
                enum: [YES, NO, ABSTAIN]
              voting_power:
                type: number
                format: double
              cast_at:
                type: string
                format: date-time
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      required: [proposal_id, title, description, proposal_type, created_by, status, voting_start, voting_end, quorum_required, approval_threshold, total_votes, yes_votes, no_votes, abstain_votes, current_approval_rate, is_quorum_met, votes_detail, created_at, updated_at]

    VoteRequest:
      type: object
      properties:
        vote_choice:
          type: string
          enum: [YES, NO, ABSTAIN]
        comment:
          type: string
          maxLength: 1000
          nullable: true
      required: [vote_choice]

    VoteResponse:
      type: object
      properties:
        vote_id:
          type: string
        proposal_id:
          type: string
          format: uuid
        user_id:
          type: string
          format: uuid
        vote_choice:
          type: string
          enum: [YES, NO, ABSTAIN]
        voting_power:
          type: number
          format: double
        vote_weight:
          type: number
          format: double
        cast_at:
          type: string
          format: date-time
        proposal_status_after:
          type: string
          enum: [DRAFT, VOTING, PASSED, REJECTED, EXPIRED]
      required: [vote_id, proposal_id, user_id, vote_choice, voting_power, vote_weight, cast_at, proposal_status_after]

    UserVotesResponse:
      type: object
      properties:
        data:
          type: array
          items:
            type: object
            properties:
              vote_id:
                type: string
              proposal_id:
                type: string
                format: uuid
              proposal_title:
                type: string
              vote_choice:
                type: string
                enum: [YES, NO, ABSTAIN]
              voting_power:
                type: number
                format: double
              comment:
                type: string
                nullable: true
              cast_at:
                type: string
                format: date-time
        pagination:
          $ref: '#/components/schemas/PaginationInfo'
      required: [data, pagination]

    # ==================== Statistics ====================
    StatsOverview:
      type: object
      properties:
        total_circulation:
          type: string
          pattern: '^\d+\.\d{8}$'
          description: ç·æµé€šé‡
        total_issued:
          type: string
          pattern: '^\d+\.\d{8}$'
          description: ç·ç™ºè¡Œé‡
        total_burned:
          type: string
          pattern: '^\d+\.\d{8}$'
          description: ç·ãƒãƒ¼ãƒ³é‡
        total_holders:
          type: integer
          description: ãƒ›ãƒ«ãƒ€ãƒ¼æ•°
        active_holders:
          type: integer
          description: ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ›ãƒ«ãƒ€ãƒ¼æ•°ï¼ˆæ®‹é«˜>0ï¼‰
        average_balance:
          type: string
          pattern: '^\d+\.\d{8}$'
          description: å¹³å‡æ®‹é«˜
        median_balance:
          type: string
          pattern: '^\d+\.\d{8}$'
          description: ä¸­å¤®å€¤æ®‹é«˜
        daily_issuance:
          type: string
          pattern: '^\d+\.\d{8}$'
          description: æ—¥æ¬¡ç™ºè¡Œé‡
        daily_collection:
          type: string
          pattern: '^\d+\.\d{8}$'
          description: æ—¥æ¬¡å¾´åé‡
        burn_rate:
          type: number
          format: double
          description: ãƒãƒ¼ãƒ³ç‡
        last_updated:
          type: string
          format: date-time
      required: [total_circulation, total_issued, total_burned, total_holders, active_holders, average_balance, median_balance, daily_issuance, daily_collection, burn_rate, last_updated]

    CirculationStats:
      type: object
      properties:
        period:
          type: string
          description: ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ (ä¾‹: BAD_REQUEST, NOT_FOUND, VALIDATION_ERROR, UNAUTHORIZED, INTERNAL_SERVER_ERROR)
        data:
          type: array
          items:
            type: object
            properties:
              date:
                type: string
                format: date
              circulation:
                type: string
                pattern: '^\d+\.\d{8}$'
              issued:
                type: string
                pattern: '^\d+\.\d{8}$'
              burned:
                type: string
                pattern: '^\d+\.\d{8}$'
              collected:
                type: string
                pattern: '^\d+\.\d{8}$'
              holders:
                type: integer
        summary:
          type: object
          properties:
            total_change:
              type: string
              pattern: '^[+-]?\d+\.\d{8}$'
            average_daily_issuance:
              type: string
              pattern: '^\d+\.\d{8}$'
            average_daily_burn:
              type: string
              pattern: '^\d+\.\d{8}$'
            growth_rate:
              type: number
              format: double
      required: [period, data, summary]

    RewardStats:
      type: object
      properties:
        from_date:
          type: string
          format: date
        to_date:
          type: string
          format: date
        group_by:
          type: string
          enum: [day, week, month]
        data:
          type: array
          items:
            type: object
            properties:
              period:
                type: string
                format: date
              total_rewards:
                type: string
                pattern: '^\d+\.\d{8}$'
              recipient_count:
                type: integer
              average_reward:
                type: string
                pattern: '^\d+\.\d{8}$'
              max_reward:
                type: string
                pattern: '^\d+\.\d{8}$'
              min_reward:
                type: string
                pattern: '^\d+\.\d{8}$'
        summary:
          type: object
          properties:
            total_period_rewards:
              type: string
              pattern: '^\d+\.\d{8}$'
            total_recipients:
              type: integer
            overall_average:
              type: string
              pattern: '^\d+\.\d{8}$'
      required: [from_date, to_date, group_by, data, summary]

    TopHoldersResponse:
      type: object
      properties:
        data:
          type: array
          items:
            type: object
            properties:
              rank:
                type: integer
              user_id:
                type: string
                format: uuid
              current_balance:
                type: string
                pattern: '^\d+\.\d{8}$'
              percentage_of_total:
                type: number
                format: double
              last_activity:
                type: string
                format: date-time
                nullable: true
        total_represented:
          type: string
          pattern: '^\d+\.\d{8}$'
        percentage_of_circulation:
          type: number
          format: double
        generated_at:
          type: string
          format: date-time
      required: [data, total_represented, percentage_of_circulation, generated_at]

    # ==================== Oracle ====================
    OracleFeedsResponse:
      type: object
      properties:
        data:
          type: array
          items:
            type: object
            properties:
              feed_id:
                type: string
              source:
                type: string
              data_type:
                type: string
                enum: [PRICE, VOLUME, LIQUIDITY, RATE]
              value:
                type: string
                pattern: '^\d+\.\d{8}$'
              confidence:
                type: number
                format: double
                minimum: 0.0
                maximum: 1.0
              timestamp:
                type: string
                format: date-time
              metadata:
                type: object
                nullable: true
        latest_update:
          type: string
          format: date-time
      required: [data, latest_update]

    OracleFeedUpdateRequest:
      type: object
      properties:
        source:
          type: string
          maxLength: 50
        data_type:
          type: string
          enum: [PRICE, VOLUME, LIQUIDITY, RATE]
        value:
          type: string
          pattern: '^\d+\.\d{8}$'
        confidence:
          type: number
          format: double
          minimum: 0.0
          maximum: 1.0
          default: 1.0
        metadata:
          type: object
          nullable: true
      required: [source, data_type, value]

    OracleFeedUpdateResponse:
      type: object
      properties:
        feed_id:
          type: string
        source:
          type: string
        data_type:
          type: string
          enum: [PRICE, VOLUME, LIQUIDITY, RATE]
        value:
          type: string
          pattern: '^\d+\.\d{8}$'
        confidence:
          type: number
          format: double
        created_at:
          type: string
          format: date-time
        status:
          type: string
          enum: [ACCEPTED, REJECTED, PENDING]
      required: [feed_id, source, data_type, value, confidence, created_at, status]

    # ==================== Audit ====================
    SystemParametersResponse:
      type: object
      properties:
        data:
          type: array
          items:
            type: object
            properties:
              parameter_id:
                type: string
              parameter_name:
                type: string
              parameter_value:
                type: string
              parameter_type:
                type: string
                enum: [STRING, NUMBER, BOOLEAN, JSON]
              description:
                type: string
                nullable: true
              last_updated_by:
                type: string
                format: uuid
                nullable: true
              updated_at:
                type: string
                format: date-time
        total_parameters:
          type: integer
      required: [data, total_parameters]

    ParameterUpdateRequest:
      type: object
      properties:
        parameter_value:
          type: string
        update_reason:
          type: string
          maxLength: 200
        force_update:
          type: boolean
          default: false
          description: å€¤ã®æ¤œè¨¼ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦å¼·åˆ¶æ›´æ–°ã™ã‚‹ã‹
      required: [parameter_value, update_reason]

    ParameterUpdateResponse:
      type: object
      properties:
        parameter_id:
          type: string
        parameter_name:
          type: string
        old_value:
          type: string
        new_value:
          type: string
        updated_by:
          type: string
          format: uuid
        update_reason:
          type: string
        updated_at:
          type: string
          format: date-time
        validation_passed:
          type: boolean
      required: [parameter_id, parameter_name, old_value, new_value, updated_by, update_reason, updated_at, validation_passed]

    AdjustmentLogsResponse:
      type: object
      properties:
        data:
          type: array
          items:
            type: object
            properties:
              adjustment_id:
                type: string
              parameter_name:
                type: string
              old_value:
                type: string
                nullable: true
              new_value:
                type: string
              adjustment_reason:
                type: string
              adjusted_by:
                type: string
                format: uuid
                nullable: true
              trigger_type:
                type: string
                enum: [MANUAL, AUTO_AI, ORACLE, GOVERNANCE]
              created_at:
                type: string
                format: date-time
        pagination:
          $ref: '#/components/schemas/PaginationInfo'
      required: [data, pagination]
